<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>r-data-input-and-type.knit</title>

<script src="site_libs/header-attrs-2.17/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">ChemStat-R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="getting-started-with-r.html">Getting Started with R</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Essential of The R Language
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="essential-of-r-language.html">Table of Content</a>
    </li>
    <li>
      <a href="intoduction-to-use-r.html">Introduction to Using R</a>
    </li>
    <li>
      <a href="r-data-input-and-type.html">Importing/Exporting Data into R</a>
    </li>
    <li>
      <a href="data-wrangling.html">Data Wrangling</a>
    </li>
    <li>
      <a href="eda.html">Exploratory Data Analysis</a>
    </li>
    <li>
      <a href="stat_test.html">Statistical Test</a>
    </li>
    <li>
      <a href="anova.html">Analysis of Variance (ANOVA)</a>
    </li>
    <li>
      <a href="correlation.html">Correlation Analysis</a>
    </li>
    <li>
      <a href="regression.html">Regression Analysis</a>
    </li>
    <li>
      <a href="stepwise-regression.html">Stepwise Regression</a>
    </li>
    <li>
      <a href="non-linear-regression.html">Nonlinear Regression</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Cheminformatics with R
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="cheminformatics-with-r.html">Table of Content</a>
    </li>
    <li>
      <a href="getting-strated-chem.html">Getting Started</a>
    </li>
    <li>
      <a href="cheminformatics-with-chemminer.html">Cheminformatics with ChemmineR</a>
    </li>
    <li>
      <a href="cheminformatics-with-cdk.html">Cheminformatics with CDK</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    ICP-MS Data Processing with R
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="icp-ms-data-processing-and-analysis-with-r.html">Table of Content</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="mailto:zia207@gmail.com">
    <span class="fa fa-envelope fa-lg"></span>
     
    Email
  </a>
</li>
<li>
  <a href="http://github.com/zia207">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/zia-ahmed-a7653578">
    <span class="fa fa-linkedin fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">




</div>


<div style="margin-bottom:50px;">

</div>
<img src="Image/PNG_FILE_02/import.png" width="100%" style="display: block; margin: auto;" />
<div style="margin-bottom:20px;">

</div>
<p>Reading or importing data into R for analysis and exporting the
results as text files, Tables, or figures for report writing or
publications can be done efficiently. There are multiple ways to import
and export data to/from R. In this tutorial, you will learn some most
common ways to read and write data with R.</p>
<div style="margin-bottom:15px;">

</div>
<div id="table-of-content" class="section level3">
<h3><strong>Table of Content</strong></h3>
<ul>
<li><p><a href="#set-working-directory">Set Working
Directory</a></p></li>
<li><p><a href="#import-data-into-r">Import Data into R</a></p>
<ul>
<li><p><a href="#import-text-Files">Import Text Files</a></p></li>
<li><p><a href="#import-comma-delimited-text-files">Import Comma
Delimited Text Files</a></p></li>
<li><p><a href="#import-excel-files">Import Excel Files</a></p></li>
</ul></li>
<li><p><a href="#export-files-from-r">Export Files from R</a></p>
<ul>
<li><p><a href="#export-data-into-text-or-csv-files">Export Data into
Text or CSV files</a></p></li>
<li><p><a href="#export-into-excel">Export into Excel</a></p></li>
<li><p><a href="#export-as-a-r-data-file">Export as a R data
file</a></p></li>
</ul></li>
<li><p><a href="#import-and-export-large-data-with-datatable">Import and
Export Large Data with datatable</a></p>
<ul>
<li><p><a href="#reading-csv-file-with-fread">Reading CSV file with
fread</a></p></li>
<li><p><a href="#writing-csv-file-with-fwrite">Writing CSV file with
fwrite</a></p></li>
</ul></li>
<li><p><a href="#feather-a-fast-ondisk-format-for-dataframe">Feather A
Fast Ondisk Format for Dataframe</a></p></li>
<li><p><a href="#data-import-and-export-with-tidyverse-package">Data
Import and Export with tidyverse Package</a></p></li>
</ul>
<div style="margin-bottom:30px;">

</div>
</div>
<div id="set-working-directory" class="section level3">
<h3><strong>Set Working Directory</strong></h3>
<p>First, suppose we want to read files from a specific location or
write files in a folder. In that case, we will need to create or set a
working directory in R. The following example shows how to set the
working directory in R to the folder “Data” within the</p>
<p>In case you want to check the directory of your R session, the
function <strong>getwd()</strong> will print the current working
directory path as a string. Hence, the output is the folder where all
your files will be saved.</p>
<pre class="r"><code>getwd()</code></pre>
<pre><code>## [1] &quot;E:/Dropbox/GitHub/chemstat-r-github.io&quot;</code></pre>
<p>If you want to change the working directory in R you just need to
call the <strong>setwd()</strong> function, specifying as argument the
path of the new working directory folder.</p>
<pre class="r"><code>myWD&lt;-setwd(&quot;E:\\Dropbox\\GitHub\\chemstat-r-github.io&quot;)    # Set working directory  
myWD&lt;-setwd(&quot;E:/Dropbox/GitHub/chemstat-r-github.io&quot;) # Equivalent
myWD</code></pre>
<pre><code>## [1] &quot;E:/Dropbox/GitHub/chemstat-r-github.io&quot;</code></pre>
<p>Remember that you must use the forward slash / or double backslash \
in R! The Windows format of single backslash will not work.</p>
<p>The files under in a directory can check using <strong>dir()</strong>
function</p>
<pre class="r"><code># dir()</code></pre>
<div style="margin-bottom:30px;">

</div>
</div>
<div id="import-data-into-r" class="section level3">
<h3><strong>Import Data into R</strong></h3>
<p>All data set use in this exercise could be found <a
href="https://www.dropbox.com/sh/ctjv2eiifhfh2ts/AAAVXmWxPntD-O-5AE_YH3VHa?dl=0">here</a>.</p>
<div style="margin-bottom:15px;">

</div>
<div id="import-text-files" class="section level4">
<h4><strong>Import Text Files</strong></h4>
<p>The easiest form of data to import into R is a simple text file, and
this will often be acceptable for problems of small or medium scale. The
primary function to import from a text file is
<strong>read.table()</strong>. However, <strong>scan()</strong> function
could be used to scan and read data. It is usually used to read data
into vector or list or from file in R Language.</p>
<pre class="r"><code>## Create a data folder
dataFolder&lt;-&quot;E:/Dropbox/GitHub/chemstat-r-github.io/Data/&quot;</code></pre>
<pre class="r"><code>data.txt&lt;-read.table(paste0(dataFolder,&quot;test_data.txt&quot;), header= TRUE) 
#data.txt&lt;-read.table(&quot;test_data.txt&quot;, header= TRUE) 
head(data.txt)</code></pre>
<pre><code>##    ID treat  var rep    PH   TN   PN   GW ster   DTM   SW   GAs  STAs
## 1 Low    As BR01   1  84.0 28.3 27.7 35.7 20.5 126.0 28.4 0.762 14.60
## 2 Low    As BR01   2 111.7 34.0 30.0 58.1 14.8 119.0 36.7 0.722 10.77
## 3 Low    As BR01   3 102.3 27.7 24.0 44.6  5.8 119.7 32.9 0.858 12.69
## 4 Low    As BR06   1 118.0 23.3 19.7 46.4 20.3 119.0 40.0 1.053 18.23
## 5 Low    As BR06   2 115.3 16.7 12.3 19.9 32.3 120.0 28.2 1.130 13.72
## 6 Low    As BR06   3 111.0 19.0 15.3 35.9 14.9 116.3 42.3 1.011 15.97</code></pre>
<pre class="r"><code>names(data.txt)</code></pre>
<pre><code>##  [1] &quot;ID&quot;    &quot;treat&quot; &quot;var&quot;   &quot;rep&quot;   &quot;PH&quot;    &quot;TN&quot;    &quot;PN&quot;    &quot;GW&quot;    &quot;ster&quot; 
## [10] &quot;DTM&quot;   &quot;SW&quot;    &quot;GAs&quot;   &quot;STAs&quot;</code></pre>
<div style="margin-bottom:20px;">

</div>
</div>
<div id="import-comma-delimited-text-files" class="section level4">
<h4><strong>Import Comma Delimited Text Files</strong></h4>
<p>The sample data can be in comma-separated values (CSV) format. Each
cell inside such data file is separated by a special character, which is
usually a comma, although other characters can be used. Reading data
from a CSV file is made easy by the <strong>read.csv()</strong>, an
extension of <strong>read.table()</strong>. It facilitates the direct
import of data from CSV files.</p>
<pre class="r"><code>data.csv&lt;-read.csv(paste0(dataFolder,&quot;test_data.csv&quot;), header= TRUE) 
#head(data.csv)
names(data.csv)</code></pre>
<pre><code>##  [1] &quot;ID&quot;    &quot;treat&quot; &quot;var&quot;   &quot;rep&quot;   &quot;PH&quot;    &quot;TN&quot;    &quot;PN&quot;    &quot;GW&quot;    &quot;ster&quot; 
## [10] &quot;DTM&quot;   &quot;SW&quot;    &quot;GAs&quot;   &quot;STAs&quot;</code></pre>
<div style="margin-bottom:20px;">

</div>
</div>
<div id="import-excel-files" class="section level4">
<h4><strong>Import Excel Files</strong></h4>
<p>One of the best ways to read an Excel file is to export it to a
comma-delimited file and import it using the method above.
Alternatively, we can use the xlsx package to access Excel files. The
first row should contain variable/column names.</p>
<pre class="r"><code># install.packages(&quot;xlsx&quot;) # Install &quot;xlsx&quot; package
# Load xlsx package
library(xlsx)</code></pre>
<pre class="r"><code># Import Sheet 1, from a excel file
data.xlsx &lt;-xlsx::read.xlsx(paste0(dataFolder,&quot;test_data.xlsx&quot;), 1) 
#data.xlsx &lt;-read.xlsx(&quot;test_data.xlsx&quot;, 1)  
names(data.xlsx)</code></pre>
<pre><code>##  [1] &quot;ID&quot;    &quot;treat&quot; &quot;var&quot;   &quot;rep&quot;   &quot;PH&quot;    &quot;TN&quot;    &quot;PN&quot;    &quot;GW&quot;    &quot;ster&quot; 
## [10] &quot;DTM&quot;   &quot;SW&quot;    &quot;GAs&quot;   &quot;STAs&quot;</code></pre>
<div style="margin-bottom:30px;">

</div>
</div>
</div>
<div id="export-files-from-r" class="section level3">
<h3><strong>Export Files from R</strong></h3>
<p>To export data and save to your local drive, you need the file path
and an extension. First of all, the path is the location where the data
will be stored.</p>
<div style="margin-bottom:15px;">

</div>
<div id="export-data-into-text-or-csv-files" class="section level4">
<h4><strong>Export Data into Text or CSV files</strong></h4>
<p>The popular R base functions for writing data are
<strong>write.table()</strong>, <strong>write.csv()</strong>,
<strong>write.csv2()</strong> and <strong>write.delim()</strong>
functions.</p>
<p>First of all, let create a data frame that we will going to export
into a text/CSV file.</p>
<pre class="r"><code>Variety =c(&quot;BR1&quot;,&quot;BR3&quot;, &quot;BR16&quot;, &quot;BR17&quot;, &quot;BR18&quot;, &quot;BR19&quot;,&quot;BR26&quot;,
          &quot;BR27&quot;,&quot;BR28&quot;,&quot;BR29&quot;,&quot;BR35&quot;,&quot;BR36&quot;) # create a text vector
Yield = c(5.2,6.0,6.6,5.6,4.7,5.2,5.7,
                5.9,5.3,6.8,6.2,5.8) # create numerical vector
rice.data= data.frame(Variety, Yield)
head(rice.data)</code></pre>
<pre><code>##   Variety Yield
## 1     BR1   5.2
## 2     BR3   6.0
## 3    BR16   6.6
## 4    BR17   5.6
## 5    BR18   4.7
## 6    BR19   5.2</code></pre>
<pre class="r"><code>write.csv(rice.data, paste0(dataFolder, &quot;rice_data.csv&quot;), row.names = F) # no row names
#write.csv(rice.data, &quot;rice_data.csv&quot;, row.names = F) # no row names</code></pre>
<div style="margin-bottom:20px;">

</div>
</div>
<div id="export-into-excel" class="section level4">
<h4><strong>Export into Excel</strong></h4>
<p>We can export data into Excel from R workspace using
<strong>writexl</strong> package which allows us to export data as an
Excel file into xlsx format.</p>
<pre class="r"><code># install writexl
#install.packages(&quot;writexl&quot;)
library(writexl)
write.xlsx(rice.data, paste0(dataFolder, &quot;rice_data.xlsx&quot;))
#write.xlsx(rice.data, &quot;rice_data.xlsx&quot;)</code></pre>
<div style="margin-bottom:20px;">

</div>
</div>
<div id="export-as-a-r-data-file" class="section level4">
<h4><strong>Export as a R data file</strong></h4>
<p>If you want to share the data from R as Objects and share those with
your colleagues through different systems so that they can use it right
away into their R workspace. These objects are of two types
<strong>.rda/.RData</strong> which can be used to store some or all
objects, functions from R global environment.</p>
<p>The <strong>save()</strong> function allows us to save multiple
objects into our global environment:</p>
<pre class="r"><code>save(rice.data, Variety, Yield,  file= paste0(dataFolder,&quot;rice_data.RData&quot;))
#save(rice.data, Variety, Yield,  file=&quot;rice_data.RData&quot;)</code></pre>
<div style="margin-bottom:30px;">

</div>
</div>
</div>
<div id="import-and-export-large-data-with-datatable"
class="section level3">
<h3><strong>Import and Export Large Data with datatable</strong></h3>
<p>The R-package <a
href="https://rdatatable.gitlab.io/data.table/">data.tabel</a> a
improved version data.frame of R-base function. It has following
advantages:</p>
<p>• concise syntax: fast to type, fast to read • fast speed • memory
efficient</p>
<pre class="r"><code># Install data.table
# install.packages(&quot;data.table&quot;)
library(data.table)</code></pre>
<div id="reading-csv-file-with-fread" class="section level4">
<h4><strong>Reading CSV file with fread</strong></h4>
<p><strong>fread</strong>: This function is capable of reading CSV files
quickly and conveniently.</p>
<pre class="r"><code>dt&lt;-data.table::fread(paste0(dataFolder,&quot;LBC_data.csv&quot;), header= TRUE) 
str(dt)</code></pre>
<pre><code>## Classes &#39;data.table&#39; and &#39;data.frame&#39;:   46605 obs. of  8 variables:
##  $ FIPS    : int  1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 ...
##  $ Year    : int  1998 1999 2000 2001 2002 2003 2004 2005 2006 2007 ...
##  $ SMOKING : num  27 26 26 26.5 26.6 26.3 27.1 26.4 26.3 25.6 ...
##  $ POVERTY : num  11.3 11.4 10.5 10.8 10.3 10.4 11.6 10.4 12.5 10.4 ...
##  $ PM25    : num  17.1 15.4 14 13.9 14.8 ...
##  $ NO2     : num  1.38 1.04 1.47 1.74 1.1 0.9 1.1 1.17 0.84 0.77 ...
##  $ SO2     : num  0.057 0.055 0.054 0.051 0.052 0.053 0.05 0.055 0.055 0.056 ...
##  $ LBC_RATE: num  90.6 90.4 89.5 89.3 89.2 ...
##  - attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt;</code></pre>
<pre class="r"><code>#dt&lt;-fread(&quot;usa_geochemical.csv&quot;, header= TRUE) </code></pre>
<div style="margin-bottom:15px;">

</div>
</div>
<div id="writing-csv-file-with-fwrite" class="section level4">
<h4><strong>Writing CSV file with fwrite</strong></h4>
<p><strong>fwrite</strong>: This capable to write CSV field very
fast!</p>
<pre class="r"><code>data.table::fwrite(dt,  paste0(dataFolder, &quot;dt.csv&quot;), row.names=F, quote=TRUE)</code></pre>
<p>Now we compare reading and writing time of <strong>fread</strong> and
<strong>frwite</strong> functions with read.csv and write.csv
functions.</p>
<p><strong>Reading time</strong></p>
<pre class="r"><code># base function read,csv
system.time(read.csv(paste0(dataFolder,&quot;LBC_data.csv&quot;), header= TRUE)) </code></pre>
<pre><code>##    user  system elapsed 
##    0.21    0.00    0.22</code></pre>
<pre class="r"><code>#fread of data.table
system.time(data.table::fread(paste0(dataFolder,&quot;LBC_data.csv&quot;), header= TRUE)) </code></pre>
<pre><code>##    user  system elapsed 
##       0       0       0</code></pre>
<p><strong>Writing time</strong></p>
<pre class="r"><code># base-function write.csv
system.time(write.csv(dt,  paste0(dataFolder, &quot;DT.csv&quot;), row.names=F))</code></pre>
<pre><code>##    user  system elapsed 
##    0.91    0.03    0.94</code></pre>
<pre class="r"><code># fwrite of data.table
system.time(data.table::fwrite(dt,  paste0(dataFolder, &quot;DT.csv&quot;), row.names=F, quote=TRUE))</code></pre>
<pre><code>##    user  system elapsed 
##    0.07    0.00    0.03</code></pre>
<p>Beside two functions, we can perform several data transforming such
as how to subset rows, select and compute on columns, and perform
aggregations by group, etc with data.table API. Here is the cheat sheets
of data.table package</p>
<p><img src="Image/PNG_FILE_02/data_table_01.png" width="100%" style="display: block; margin: auto;" /></p>
<div style="margin-bottom:20px;">

</div>
<p><img src="Image/PNG_FILE_02/data_table_02.png" width="100%" style="display: block; margin: auto;" /></p>
<div style="margin-bottom:25px;">

</div>
</div>
</div>
<div id="feather-a-fast-ondisk-format-for-dataframe"
class="section level3">
<h3><strong>Feather A Fast Ondisk Format for Dataframe</strong></h3>
<p>Feather is a fast, lightweight, and easy-to-use binary file format
for storing data frames. It has a few specific design goals:</p>
<ul>
<li><p>Lightweight, minimal API: make pushing data frames in and out of
memory as simple as possible</p></li>
<li><p>Language agnostic: Feather files are the same whether written by
Python or R code. Other languages can read and write Feather files,
too.</p></li>
</ul>
<p>Feather is extremely fast. Since Feather does not currently use any
compression internally, it works best when used with solid-state drives
as come with most of today’s laptop computers. For this first release,
we prioritized a simple implementation and are thus writing unmodified
Arrow memory to disk.</p>
<p>source: <a href="https://www.rstudio.com/blog/feather/"
class="uri">https://www.rstudio.com/blog/feather/</a></p>
<pre class="r"><code>#install.packages(&quot;feather&quot;)
library(feather)</code></pre>
<p>First we have to create feather data using
<strong>write_feather()</strong> function</p>
<pre class="r"><code>write_feather(dt, paste0(dataFolder, &quot;LBC_data.feather&quot;))</code></pre>
<p>We can read this feather data with lighting speed using read_feather
function()</p>
<pre class="r"><code>DT_feather &lt;- feather::read_feather(paste0(dataFolder, &quot;LBC_data.feather&quot;))
str(DT_feather)</code></pre>
<pre><code>## tibble [46,605 × 8] (S3: tbl_df/tbl/data.frame)
##  $ FIPS    : int [1:46605] 1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 ...
##  $ Year    : int [1:46605] 1998 1999 2000 2001 2002 2003 2004 2005 2006 2007 ...
##  $ SMOKING : num [1:46605] 27 26 26 26.5 26.6 26.3 27.1 26.4 26.3 25.6 ...
##  $ POVERTY : num [1:46605] 11.3 11.4 10.5 10.8 10.3 10.4 11.6 10.4 12.5 10.4 ...
##  $ PM25    : num [1:46605] 17.1 15.4 14 13.9 14.8 ...
##  $ NO2     : num [1:46605] 1.38 1.04 1.47 1.74 1.1 0.9 1.1 1.17 0.84 0.77 ...
##  $ SO2     : num [1:46605] 0.057 0.055 0.054 0.051 0.052 0.053 0.05 0.055 0.055 0.056 ...
##  $ LBC_RATE: num [1:46605] 90.6 90.4 89.5 89.3 89.2 ...</code></pre>
<p>Compare to and <strong>wrire.csv()</strong> as well as
<strong>frwite()</strong>, <strong>write_feather()</strong> is very
fast:</p>
<pre class="r"><code># CSV file with base write.csv
system.time(write.csv(dt, paste0(dataFolder, &quot;LBC_data.csv&quot;)))</code></pre>
<pre><code>##    user  system elapsed 
##    0.98    0.02    1.00</code></pre>
<pre class="r"><code># CSV file with fwrite
system.time(data.table::fwrite(dt, paste0(dataFolder, &quot;LBC_data.csv&quot;)))</code></pre>
<pre><code>##    user  system elapsed 
##    0.06    0.00    0.03</code></pre>
<pre class="r"><code># feather file with 
system.time(feather::write_feather(dt, paste0(dataFolder, &quot;LBC_data.feather&quot;)))</code></pre>
<pre><code>##    user  system elapsed 
##    0.01    0.00    0.02</code></pre>
<div style="margin-bottom:30px;">

</div>
</div>
<div id="data-import-and-export-with-tidyverse-package"
class="section level3">
<h3><strong>Data Import and Export with tidyverse Package</strong></h3>
<p>The tidyverse is an collection of several R packages designed for
data science. All packages share an underlying design philosophy,
grammar, and data structures. (source:<a
href="https://www.tidyverse.org/"
class="uri">https://www.tidyverse.org/</a> )</p>
<p>The core tidyverse includes the packages that you’re likely to use in
everyday data analyses. As of tidyverse 1.3.0, the following packages
are included in the core tidyverse:</p>
<div style="margin-bottom:20px;">

</div>
<p><img src="Image/PNG_FILE_02/tidyverse.png" width="70%" style="display: block; margin: auto auto auto 0;" /></p>
<div style="margin-bottom:20px;">

</div>
<div id="installation-and-use" class="section level4">
<h4><strong>Installation and Use</strong></h4>
<ul>
<li><p>Install all the packages in the tidyverse by running
install.packages(“tidyverse”).</p></li>
<li><p>Run library(tidyverse) to load the core tidyverse and make it
available in your current R session.</p></li>
</ul>
<pre class="r"><code># install.packages(&quot;tidyverse&quot;)
library(tidyverse)</code></pre>
<p>As well as <strong>readr</strong>, for reading flat files, the
tidyverse package installs a number of other packages for reading
data:</p>
<ul>
<li><p><strong>DBI</strong> for relational databases. (Maintained by
Kirill Müller.) You’ll need to pair DBI with a database specific
backends like RSQLite, RMariaDB, RPostgres, or odbc. Learn more at <a
href="https://db.rstudio.com"
class="uri">https://db.rstudio.com</a>.</p></li>
<li><p><strong>haven</strong> for SPSS, Stata, and SAS data.</p></li>
<li><p><strong>httr</strong> for web APIs.</p></li>
<li><p><strong>readxl</strong> for .xls and .xlsx sheets.</p></li>
<li><p><strong>googlesheets4</strong> for Google Sheets via the Sheets
API v4.</p></li>
<li><p><strong>googledrive</strong> for Google Drive files.</p></li>
<li><p><strong>rvest</strong> for web scraping.</p></li>
<li><p><strong>jsonlite</strong> for JSON. (Maintained by Jeroen
Ooms.)</p></li>
<li><p><strong>xml2</strong> for XML</p></li>
</ul>
<div style="margin-bottom:20px;">

</div>
</div>
<div id="read-a-delimited-file-including-csv-and-tsv-into-a-tibble"
class="section level4">
<h4><strong>Read a delimited file (including CSV and TSV) into a
tibble</strong></h4>
<p>A <strong>tibble</strong>, or <strong>tbl_df</strong>, is the latest
method for reimagining of modern data-frame and It keeps all the crucial
features regarding the data frame. Since R is an old language, and some
things that were useful 10 or 20 years ago now get in your way. It’s
difficult to change base R without breaking existing code, so most
innovation occurs in <strong>tibble()</strong> data-frame with tibble
package.</p>
<p><em>Key features of Tibble</em></p>
<ul>
<li><p>A Tibble never alters the input type.</p></li>
<li><p>With Tibble, there is no need for us to be bothered about the
automatic changing of characters to strings.</p></li>
<li><p>Tibbles can also contain columns that are the lists.</p></li>
<li><p>We can also use non-standard variable names in Tibble.</p></li>
<li><p>We can start the name of a Tibble with a number, or we can also
contain space.</p></li>
<li><p>To utilize these names, we must mention them in
backticks.</p></li>
<li><p>Tibble only recycles the vectors with a length of 1.</p></li>
<li><p>Tibble can never generate the names of rows.</p></li>
</ul>
<p>source: <a
href="https://www.educative.io/answers/what-is-tibble-versus-data-frame-in-r"
class="uri">https://www.educative.io/answers/what-is-tibble-versus-data-frame-in-r</a></p>
<div style="margin-bottom:20px;">

</div>
<p>We can use following functions <strong>readr</strong> package to
import tabular data into R as tibble:</p>
<p><img src="Image/PNG_FILE_02/read_readr_function.png" width="60%" style="display: block; margin: auto auto auto 0;" /></p>
<div style="margin-bottom:20px;">

</div>
<p><strong>read_csv()</strong> and <strong>read_tsv()</strong> from
<strong>readr</strong> package are special cases of the more general
read_delim(). They’re useful for reading the most common types of flat
file data, comma separated values and tab separated values,
respectively. read_csv2() uses ⁠;⁠ for the field separator and ⁠,⁠ for the
decimal point. This format is common in some European countries.</p>
<p>For example, importing CSV file:</p>
<pre class="r"><code>df.chem_01&lt;-readr::read_csv(paste0(dataFolder,&quot;PAHdata.csv&quot;))
str(df.chem_01)</code></pre>
<pre><code>## spc_tbl_ [20 × 23] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ Subject                  : chr [1:20] &quot;P1&quot; &quot;P3&quot; &quot;P4&quot; &quot;P5&quot; ...
##  $ Napthalene               : num [1:20] 0.899 3.626 3.392 3.577 4.491 ...
##  $ 1-Methyl Napthalene      : num [1:20] 4.97 4.69 3.54 4.75 5.11 ...
##  $ 2-Methyl Napthalene      : num [1:20] 2.15 3.93 1.7 2.94 4 ...
##  $ Acenapthylene            : num [1:20] 0.0131 3.0151 1.3859 3.3943 6.6593 ...
##  $ 1,2 Dimethyl napthalene  : num [1:20] NA NA 1.24 2.64 2.14 ...
##  $ 1,6 Dimethyl Napthalene  : num [1:20] 0.7 2.64 1.38 1.1 2.26 ...
##  $ Fluorene                 : num [1:20] 2.25 7.35 7.16 8.44 9.24 ...
##  $ 1,6,7 Trimethylnapthalene: num [1:20] 5.1 6.79 6.52 4.68 6.46 ...
##  $ Anthracene               : num [1:20] 10.17 9.64 22.4 26.38 20.96 ...
##  $ Dibenzothiopene          : num [1:20] 1.16 4.12 4.23 3.99 3.26 ...
##  $ 2-Methyl Anthracene      : num [1:20] 0.541 4.519 8.401 13.01 4.49 ...
##  $ 1-Methylphenanthrene     : num [1:20] 14.96 12.09 19.49 11.21 2.03 ...
##  $ 2-Methylphenanthrene     : num [1:20] 5.48 18.25 36.43 16.46 10.8 ...
##  $ Pyrene                   : num [1:20] 4.85 14.94 10.11 26.06 20.87 ...
##  $ Fluoranthene             : num [1:20] 4.48 9.72 9.8 19.05 20.09 ...
##  $ 1-Phenyl napthalene      : num [1:20] 2.88 6.25 5.3 7.95 10.16 ...
##  $ 2-Phenyl napthalene      : num [1:20] 3.41 8.74 3.7 12.85 15.1 ...
##  $ 1 Methylpyrene           : num [1:20] 4.58 7.51 13.6 8.11 19.24 ...
##  $ Benzo(c)phenanthrene     : num [1:20] 3.65 7.04 5.1 3.38 8.16 ...
##  $ Triphenylene/Chrysene    : num [1:20] 1.74 5.14 3.16 5.71 6.75 ...
##  $ Benz(a)pyrene            : num [1:20] NA 2.845 NA 5.07 0.587 ...
##  $ Benz(e)pyrene            : num [1:20] NA 1.816 0.298 0.662 2.367 ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   Subject = col_character(),
##   ..   Napthalene = col_double(),
##   ..   `1-Methyl Napthalene` = col_double(),
##   ..   `2-Methyl Napthalene` = col_double(),
##   ..   Acenapthylene = col_double(),
##   ..   `1,2 Dimethyl napthalene` = col_double(),
##   ..   `1,6 Dimethyl Napthalene` = col_double(),
##   ..   Fluorene = col_double(),
##   ..   `1,6,7 Trimethylnapthalene` = col_double(),
##   ..   Anthracene = col_double(),
##   ..   Dibenzothiopene = col_double(),
##   ..   `2-Methyl Anthracene` = col_double(),
##   ..   `1-Methylphenanthrene` = col_double(),
##   ..   `2-Methylphenanthrene` = col_double(),
##   ..   Pyrene = col_double(),
##   ..   Fluoranthene = col_double(),
##   ..   `1-Phenyl napthalene` = col_double(),
##   ..   `2-Phenyl napthalene` = col_double(),
##   ..   `1 Methylpyrene` = col_double(),
##   ..   `Benzo(c)phenanthrene` = col_double(),
##   ..   `Triphenylene/Chrysene` = col_double(),
##   ..   `Benz(a)pyrene` = col_double(),
##   ..   `Benz(e)pyrene` = col_double()
##   .. )
##  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</code></pre>
<div style="margin-bottom:20px;">

</div>
</div>
<div id="write-a-data-frame-to-a-delimited-file-with-readr-package"
class="section level4">
<h4><strong>Write a data frame to a delimited file with readr
package</strong></h4>
<p>The <strong>write_()</strong>⁠ family of functions are an improvement
to analogous function such as write.csv() because they are approximately
twice as fast. Unlike write.csv(), these functions do not include row
names as a column in the written file. A generic function,
output_column(), is applied to each variable to coerce columns to
suitable output.</p>
<p>We can use following functions <strong>readr</strong> package to
extort tabular data from R:</p>
<p><img src="Image/PNG_FILE_02/write_readr_function.png" width="40%" style="display: block; margin: auto auto auto 0;" /></p>
<pre class="r"><code>readr::write_csv(df.chem_01, &quot;df.chem_01&quot;)</code></pre>
<div style="margin-bottom:20px;">

</div>
<p>We can also use <strong>as_tibble()</strong> function of
<strong>tibble</strong> package</p>
<pre class="r"><code>df.chem_02&lt;-tibble::as_tibble(read.csv(paste0(dataFolder,&quot;PAHdata.csv&quot;), check.names = FALSE))
str(df.chem_02)</code></pre>
<pre><code>## tibble [20 × 23] (S3: tbl_df/tbl/data.frame)
##  $ Subject                  : chr [1:20] &quot;P1&quot; &quot;P3&quot; &quot;P4&quot; &quot;P5&quot; ...
##  $ Napthalene               : num [1:20] 0.899 3.626 3.392 3.577 4.491 ...
##  $ 1-Methyl Napthalene      : num [1:20] 4.97 4.69 3.54 4.75 5.11 ...
##  $ 2-Methyl Napthalene      : num [1:20] 2.15 3.93 1.7 2.94 4 ...
##  $ Acenapthylene            : num [1:20] 0.0131 3.0151 1.3859 3.3943 6.6593 ...
##  $ 1,2 Dimethyl napthalene  : num [1:20] NA NA 1.24 2.64 2.14 ...
##  $ 1,6 Dimethyl Napthalene  : num [1:20] 0.7 2.64 1.38 1.1 2.26 ...
##  $ Fluorene                 : num [1:20] 2.25 7.35 7.16 8.44 9.24 ...
##  $ 1,6,7 Trimethylnapthalene: num [1:20] 5.1 6.79 6.52 4.68 6.46 ...
##  $ Anthracene               : num [1:20] 10.17 9.64 22.4 26.38 20.96 ...
##  $ Dibenzothiopene          : num [1:20] 1.16 4.12 4.23 3.99 3.26 ...
##  $ 2-Methyl Anthracene      : num [1:20] 0.541 4.519 8.401 13.01 4.49 ...
##  $ 1-Methylphenanthrene     : num [1:20] 14.96 12.09 19.49 11.21 2.03 ...
##  $ 2-Methylphenanthrene     : num [1:20] 5.48 18.25 36.43 16.46 10.8 ...
##  $ Pyrene                   : num [1:20] 4.85 14.94 10.11 26.06 20.87 ...
##  $ Fluoranthene             : num [1:20] 4.48 9.72 9.8 19.05 20.09 ...
##  $ 1-Phenyl napthalene      : num [1:20] 2.88 6.25 5.3 7.95 10.16 ...
##  $ 2-Phenyl napthalene      : num [1:20] 3.41 8.74 3.7 12.85 15.1 ...
##  $ 1 Methylpyrene           : num [1:20] 4.58 7.51 13.6 8.11 19.24 ...
##  $ Benzo(c)phenanthrene     : num [1:20] 3.65 7.04 5.1 3.38 8.16 ...
##  $ Triphenylene/Chrysene    : num [1:20] 1.74 5.14 3.16 5.71 6.75 ...
##  $ Benz(a)pyrene            : num [1:20] NA 2.845 NA 5.07 0.587 ...
##  $ Benz(e)pyrene            : num [1:20] NA 1.816 0.298 0.662 2.367 ...</code></pre>
<div style="margin-bottom:30px;">

</div>
</div>
</div>
<div id="further-reading" class="section level3">
<h3><strong>Further Reading</strong></h3>
<ol style="list-style-type: decimal">
<li><p><a href="https://r4ds.had.co.nz/index.html">R for Data
Science</a></p></li>
<li><p><a
href="https://cran.r-project.org/doc/manuals/r-devel/R-data.htmlhttps://cran.r-project.org/doc/manuals/r-devel/R-data.html">R
Data Import/Export</a></p></li>
<li><p><a
href="https://tidyr.tidyverse.org/articles/tidy-data.html">Tidy
data</a></p></li>
<li><p><a
href="Getting%20started%20with%20the%20tidyverse;%20loading%20your%20data">Getting
started with the tidyverse; loading your data</a></p></li>
<li><p><a
href="https://jhudatascience.org/tidyversecourse/get-data.html">Chapter
2 Importing Data in the Tidyverse</a></p></li>
</ol>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
